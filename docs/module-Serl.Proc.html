<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Proc</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Proc</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>
            <span class="ancestors"><a href="module-Serl.html">Serl</a>.</span>Proc<span class="signature">(nodeName, procIndex, localNode)</span><span class="type-signature"></span></h2>
        
            <div class="class-description"><p>Constructor for objects analogous to an <a href="https://erlang.org/doc/getting_started/conc_prog.html#processes">OTP process</a>.</p></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="Proc"><span class="type-signature"></span>new Proc<span class="signature">(nodeName, procIndex, localNode)</span><span class="type-signature"></span></h4>
    

    











    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>nodeName</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-Serl.Node.html#name">module:Serl.Node#name</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>procIndex</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-Serl.html#.ProcIndex">module:Serl.ProcIndex</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>localNode</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-Serl.Node.html">module:Serl.Node</a></span>


            
            </td>

            

            

            <td class="description last"><p>The <a href="module-Serl.Node.html">node</a> which
spawns the new proc, then stores it in its node.procMap.</p>
<p>This procMap should be the ONLY direct reference to the process, otherwise
interactions with this process should only occur via send/receive i.e.
message-passing.</p></td>
        </tr>

    
    </tbody>
</table>






    <h5 class="subsection-title">Properties:</h5>

    

<table class="props">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>toString</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p><a href="module-Serl.Proc.html#toString">module:Serl.Proc#toString</a></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>defaultMailHandler</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p><a href="module-Serl.Proc.html#defaultMailHandler">module:Serl.Proc#defaultMailHandler</a></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>send</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p><a href="module-Serl.Proc.html#send">module:Serl.Proc#send</a></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>receive</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p><a href="module-Serl.Proc.html#receive">module:Serl.Proc#receive</a></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>node</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-Serl.Node.html">module:Serl.Node</a></span>


            
            </td>

            

            

            <td class="description last"><p>Reference to argument passed in
parameter#3; doing this is questionable. To be reviewed.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>nodeIndex</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-Serl.html#.NodeIndex">module:Serl.NodeIndex</a></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>pid</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-Serl.Pid.html">module:Serl.Pid</a></span>


            
            </td>

            

            

            <td class="description last"><p>Unique identifier for this proc, on this
Node.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>mailbox</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            

            

            <td class="description last"><p>A stack for messages received by this proc.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>mailHandler</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            

            

            <td class="description last"><p>A method which determines how the process
handles messages it receives. This may include storing them in the mailbox,
checking messages already in the mailbox, executing other logic, or simply
ignoring them.</p></td>
        </tr>

    
    </tbody>
</table>




<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="serl.js.html">serl.js</a>, <a href="serl.js.html#line346">line 346</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>Dependence on localNode is questionable; review.</li>
        
            <li>Do we need to validate argument types here?</li>
        
            <li>Would performance improve if these were static methods?</li>
        </ul>
    </dd>
    
</dl>




















    
    </div>

    

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="node"><span class="type-signature"></span>node<span class="type-signature"> :<a href="module-Serl.Node.html">module:Serl.Node</a></span></h4>






    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="module-Serl.Node.html">module:Serl.Node</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="serl.js.html">serl.js</a>, <a href="serl.js.html#line409">line 409</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>Review, do we want this here?</li>
        </ul>
    </dd>
    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="defaultMailHandler"><span class="type-signature"></span>defaultMailHandler<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>When the next message come in, they will be held in
this.mailbox in their order of
arrival. No attempt is made to match them to any further logical branches</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="serl.js.html">serl.js</a>, <a href="serl.js.html#line432">line 432</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="receive"><span class="type-signature"></span>receive<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>See <a href="http://erlang.org/doc/reference_manual/expressions.html#receive">OTP docs</a>.</p>
<p>In the body of a function passed to <a href="module-Serl.Node.html#spawn">spawn/n</a>, usage would be in the example below, where
<code>this</code> refers to the <a href="module-Serl.Proc.html">proc</a> which was
spawned.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="serl.js.html">serl.js</a>, <a href="serl.js.html#line487">line 487</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li>Text:           <a href="https://erlangbyexample.org/send-receive">https://erlangbyexample.org/send-receive</a><br>
 Illustrated:    <a href="https://learnyousomeerlang.com/more-on-multiprocessing">https://learnyousomeerlang.com/more-on-multiprocessing</a>

 <pre>
 How does a process handle received messages?

 When a process receives a message, the message is
 appended to the mailbox.

 The receive block will try each message in the mailbox (one
 by one), against that block's sequence of patterns, until
 one of the messages matches a pattern.

 When there is match, the message gets removed from
 the mailbox and the logic corresponding to the matched pattern
 will get executed. If there is no match,
 then that message remains in the mailbox, and the following
 message gets tried sequentially,
 against all of the receive block's patterns.

 If no messages in the mailbox match any pattern, the process,
 having tried all messages, and having exhausted all receive
 patterns, will get suspended until a new message arrives,
 and the message processing logic starts all over,
 beginning with the first message in the mailbox.
 </pre></li>
        </ul>
    </dd>
    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>extend example to include entire call to spawn/n</li>
        
            <li>typecheck 'branches'? Should be iterable. Currently expects</li>
        
            <li>type: [ [ 'function', 'function'] ]</li>
        
            <li>Perhaps allow type: [ 'function', 'function' ] ?</li>
        
            <li>Perhaps allow type: 'function' where this is just the branch?</li>
        </ul>
    </dd>
    
</dl>



















    <h5>Example</h5>
    
    <pre class="prettyprint"><code>let awaited = await this.receive( branches )

 </code></pre>



        
            

    

    
    <h4 class="name" id="send"><span class="type-signature"></span>send<span class="signature">(dest, msg)</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sends a message from this process to another process.</p>
<p>Ultimately executes:</p>
<pre class="prettyprint source"><code>destinationProcess.mailHandler ( validMsg )
</code></pre>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>dest</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="module-Serl.Pid.html">module:Serl.Pid</a></span>


            
            </td>

            

            

            <td class="description last"><p>A Pid object which addresses the local or
remote process.</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>msg</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            

            

            <td class="description last"><p>The message to be sent to the destination process.</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="serl.js.html">serl.js</a>, <a href="serl.js.html#line444">line 444</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>Validation/Proxy/Reassignment: ensure that nothing is passed by reference.</li>
        
            <li>Validation of <code>dest</code>?</li>
        </ul>
    </dd>
    
</dl>




















        
            

    

    
    <h4 class="name" id="toString"><span class="type-signature"></span>toString<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Overridden <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString">toString</a>
. Output is of the form:</p>
<pre class="prettyprint source"><code>[object Proc&lt;0.1>]
</code></pre>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="serl.js.html">serl.js</a>, <a href="serl.js.html#line417">line 417</a>
    </li></ul></dd>
    

    

    

    
    <dt class="tag-todo">To Do:</dt>
    <dd class="tag-todo">
        <ul>
            <li>this should be made into a static method.</li>
        </ul>
    </dd>
    
</dl>




















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-Serl.html">Serl</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-Serl._Node_nodeMap_.html">'Node#nodeMap'</a></li><li><a href="module-Serl._Node_procMap_.html">'Node#procMap'</a></li></ul><h3>Classes</h3><ul><li><a href="module-Serl.Node.html">Node</a></li><li><a href="module-Serl.Pid.html">Pid</a></li><li><a href="module-Serl.Proc.html">Proc</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Mon Dec 30 2019 06:52:29 GMT+0800 (Malaysia Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>